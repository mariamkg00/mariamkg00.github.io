[
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "Exploring the Impacts of the Thomas Fire on Air Quality and Land in CA\n\n\n\n\n\n\n\n\n\n\n \n\n\n\n\n  \n\n\n\n\nMPC Catalog Exploration\n\n\n\n\n\nEDS 220 class assignment\n\n\n\n\n\n\nMariam Garcia\n\n\n\n\n\n\n  \n\n\n\n\nIncome and Cardiovascular Health in LA County\n\n\n\n\n\n\n\nQuarto\n\n\nMEDS\n\n\nStatistics\n\n\nEnvironmental Justice\n\n\n\n\nStatical analysis of income and hypothesis testing on whether or not income can affect cardiovascular health\n\n\n\n\n\n\nDec 13, 2023\n\n\nMariam Garcia\n\n\n\n\n\n\n  \n\n\n\n\nHistorical Redlining and its Impact on Commmunities in LA\n\n\n\n\n\n\n\nQuarto\n\n\nR\n\n\nMEDS\n\n\nGeospatial\n\n\n\n\nGeospatial analysis on different HOLC graded areas\n\n\n\n\n\n\nDec 12, 2023\n\n\nMariam Garcia\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html",
    "href": "blog/income-and-cardiovascular-health/index.html",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "According to the CDC, cardiovascular-related diseases are the leading cause of death in America. Although there are a number of factors that influence cardiovascular diseases, I chose to study the relationship between median income of census tracts in Los Angeles County and the number of cardiovascular disease-related Emergency Department (ED) visits. In this research project, I will conduct a difference in means hypothesis test of two groups : Extremely Low Income and Above Moderate Income to see if there is a true difference in heart attack-related Emergency Department (ED) visits.\nCardiovascular disease can be caused by a variety of factors. Some traditional risk factors include “male sex, older age, increased blood pressure, high cholesterol, low HDL (high density lipoprotein) and smoking”(epa.gov 2023). However, there are additional external factors that can exacerbate the likelihood of cardiovascular disease occurring. The EPA also states that people who live in areas with high air pollution are at an increased risk of PM2.5, along with people of low socioeconomic status.\nLos Angeles is historically known to have strategically cut off and outline communities with freeways, which has led to brown and black communities predominantly having respiratory issues and other chronic health issues. According to the National Institute of Health, “COVID-19 has been reported to disproportionately impact racial/ethnic minorities in the USA, both in terms of infections and deaths” (Li, Yuan 2021). This can be explained by the historic segregation of minority groups. Neighborhoods that are currently undergoing socioeconomic disadvantages were known to be redlined historically. The New York case study concluded that the disproportionate number of deaths among minority groups in America during the COVID-19 pandemic highlighted the historic health and race divide compared to the White majority.\nI chose this to research this topic because it is important to realize and note that environmental problems do not only include sea level rise or increased global temperature. Ongoing environmental problems combined with systemic racism can be detrimental to the survival of minority groups in America.\nFurthermore, I decided to incorporate other variables in this research topic in order to explore other socioeconomic and chemical variables that could be correlated with the number of heart attack related emergency department visits. Education is an important socioeconomic variable to research as it can influence employment and income levels. According to the CDC , ” individuals with lower levels of educational attainment are more likely to lack sociopolitical power and economic resources”(cdc.gov). Although not all socioeconomic factors are covered in this research project, education will play an important role in determining income level and housing status.\n\n\n\nCalEnviroScreen has recently celebrated their tenth anniversary since releasing their first version. The CalEnviroScreen data set used in this study aims to highlight which communities within California are the most impacted by pollution by using census tract data that includes socioeconomic and demographic information which can help further encapsulate the larger issue at hand : pollution burden. Both California EPA and OEHHA (Office of Environmental Health Hazard Assessment) have collaboratively formulated this Environmental Justice screening tool as a means to help visualize impacts of pollution burden while accumulating various demographic data accessible for readers.\n\nVariables Explored:\n\nPM2.5 - Annual mean PM 2.5 concentrations (micrograms per meter cubed)\neducation - Percent of population over 25 with less than a high school education\ncardiovascular_disease - Age-adjusted rate of emergency department visits for heart attacks per 10,000.\n\n\nThe second dataset used for this research project contains statistical information of median household income in LA County, which is then categorized into ami categories : Above Moderate Income, Moderate Income, Low Income, Very Low Income, and Extremely Low Income.\nMy game plan for analysis includes :\n\nTidying both data sets\nJoining data sets by census tract\nPerforming a linear regression\nConducting a hypothesis test for a difference in means of emergency department visits for heart attacks between very low income AMI census tracts vs above moderate income AMI census tracts.\n\n\n\n\n\n# reading in the data \n\nincome_la &lt;- read_csv('./data/Median_Income_and_AMI_(census_tract).csv') %&gt;% \n  rename('census_tract' = 'tract')\n\n# reading in water la data\n\nlos_angeles &lt;- read_csv('data/cal_enviro_4.csv') %&gt;% \n  clean_names() %&gt;% \n  filter(california_county == 'Los Angeles')\n\n\n# joining in the two datasets\n\nincome_water_la &lt;- left_join(los_angeles, income_la, by = \"census_tract\") %&gt;% \n  na.omit()\n\n\n# preliminary plotting\nincome_cardio_tox_ed &lt;- lm(cardiovascular_disease ~ med_hh_income + tox_release +education, data = income_water_la)\n\nincome_cardio &lt;- lm(cardiovascular_disease ~ med_hh_income, data = income_water_la)\n\nsummary(income_cardio)\n\n\nCall:\nlm(formula = cardiovascular_disease ~ med_hh_income, data = income_water_la)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-10.9293  -2.9622  -0.3157   2.8695  12.0974 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    1.919e+01  2.305e-01   83.26   &lt;2e-16 ***\nmed_hh_income -6.557e-05  2.778e-06  -23.60   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 4.202 on 1903 degrees of freedom\nMultiple R-squared:  0.2264,    Adjusted R-squared:  0.226 \nF-statistic:   557 on 1 and 1903 DF,  p-value: &lt; 2.2e-16\n\n\n\ncount_income &lt;- income_water_la %&gt;% \n  group_by(ami_category) %&gt;% \n  count() %&gt;%  \n  rename(`Number of Census Groups` = n,\n         `AMI Category` = ami_category)\nknitr::kable(count_income)\n\n\n\n\nAMI Category\nNumber of Census Groups\n\n\n\n\nAbove Moderate Income\n419\n\n\nExtremely Low Income\n94\n\n\nLow Income\n740\n\n\nModerate Income\n19\n\n\nVery Low Income\n633\n\n\n\n\n\nOf the 1,905 census tract groups with an associated AMI category :\n\n419 census tract groups fall under the Above Moderate Income category\n633 census tract groups fall under the Very Low Income category.\n\n\nggplot(income_water_la, aes(x = med_hh_income, y = cardiovascular_disease, col = education))+\n  geom_point()+\n  stat_smooth(method = 'lm', col = 'red')+\n  labs(x = 'Median Household Income (USD)',\n       y = 'Heart Attack ED visits per 10,000 people',\n       title = '     Median Income vs. Cardiovascular Disease')+\n  theme_classic()+\n  stat_poly_eq()\n\n\n\n\n\nggplot(income_water_la, aes(x = education, y = cardiovascular_disease))+\n  geom_point(color = '#CBC3E3')+\n  stat_smooth(method = 'lm', col = '#9F2B68')+\n  labs(x = '% of Adults &gt; 25 with Less \\nThan a High School Education',\n       y = 'Heart Attack ED visits per 10,000 people',\n       title = '     Education Level vs. Cardiovascular Disease')+\n  theme_classic()+\n  stat_poly_eq()\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n## hypothesis test construction\n# summary statistics for cardiovascular disease related ed visits\n\ncardio_stats &lt;- income_water_la %&gt;% \n  group_by(ami_category) %&gt;% \n  summarise(mean = mean(cardiovascular_disease),\n            sd = sd(cardiovascular_disease))\n\n\nprint(cardio_stats)\n\n# A tibble: 5 × 3\n  ami_category           mean    sd\n  &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt;\n1 Above Moderate Income  10.8  3.20\n2 Extremely Low Income   15.6  5.49\n3 Low Income             13.9  4.05\n4 Moderate Income        11.8  3.56\n5 Very Low Income        16.8  4.81\n\n\nThe Extremely Low Income AMI group has the most variance amongst AMI groups in this dataset.\nHowever, the number of census tract groups in the Extremely Low Income AMI group is significantly lower than the number of census groups in the Above Moderate Income. In an effort to make this analysis as representative as possible, I will be using the data from census tract groups in the Very Low Income AMI category.\nUsing the stargazer package, I will conduct three different linear models to determine which added variables positively affect the adjusted R2 value.\n\n# table of r squared values with different variables added \n\nm3 &lt;- lm(cardiovascular_disease ~ med_hh_income + pm2_5 + education, data = income_water_la)\nm2 &lt;- lm(cardiovascular_disease ~  pm2_5, data = income_water_la)\nm1 &lt;- lm(cardiovascular_disease ~ med_hh_income, data = income_water_la)\n\n\nstargazer(m1, m2, m3, title = 'Regression Results',type=\"text\", dep.var.labels = c('Heart Attack Related ED Visits per 10,000'),\n          covariate.labels=c(\"Median Household Income\",\"PM 2.5 Concentration\",\"% Population &gt; 25 with less than a High School Education\"),\n          omit.stat = c('f'),\n          font.size = 'small',align = TRUE)\n\n\nRegression Results\n==============================================================================================================\n                                                                          Dependent variable:                 \n                                                         -----------------------------------------------------\n                                                               Heart Attack Related ED Visits per 10,000      \n                                                                (1)               (2)               (3)       \n--------------------------------------------------------------------------------------------------------------\nMedian Household Income                                     -0.0001***                          -0.00003***   \n                                                             (0.00000)                           (0.00000)    \n                                                                                                              \nPM 2.5 Concentration                                                            0.254*           -0.465***    \n                                                                                (0.131)           (0.111)     \n                                                                                                              \n% Population &gt; 25 with less than a High School Education                                         0.119***     \n                                                                                                  (0.007)     \n                                                                                                              \nConstant                                                     19.189***         11.263***         19.129***    \n                                                              (0.230)           (1.538)           (1.351)     \n                                                                                                              \n--------------------------------------------------------------------------------------------------------------\nObservations                                                   1,905             1,905             1,905      \nR2                                                             0.226             0.002             0.319      \nAdjusted R2                                                    0.226             0.001             0.318      \nResidual Std. Error                                      4.202 (df = 1903) 4.772 (df = 1903) 3.945 (df = 1901)\n==============================================================================================================\nNote:                                                                              *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01\n\n\nInterpretation of stargazer table:\nOutput for first equation m1:\n\nFor every 1 unit increase in Median Household Income, the rate of cardiovascular disease related ED visits is expected to decrease by -0.0001 per 10,000.\n\nTo put this in perspective, a 10,000 increase in Median Household Income is expected to decrease the rate of ED visits for heart attacks by 1 per 10,000.\n\nR2 : 0.226 of all variability in the cardiovascular_disease output can be explained by Median Household Income.\n\nOutput for second equation m2 :\n\nA one unit increase in annual particulate matter concentration pm2_5 is expected to increase ED visits for heart attacks by .254 per 10,000.\nR2 : .002 of all variability in the cardiovascular_disease output can be explained by pm2_5.\n\nOutput for third equation m3 :\n\nHolding pm2_5 and Median Household Income constant, a one percent increase in population older than 25 with less than a high school education will lead to a 0.119 per 10,000 increase in ED visits for heart attacks.\nThe adjusted R2 value is 0.319, meaning that , combined, Median Household Income, Particulate Matter Concentration, and Education explain 31.9% of variability in the rate of emergency department visits for heart attacks per 10,000.\n\n\n\\[H_{0}: \\mu_{cardiodiseaseinVeryrLowInc} - \\mu_{cardiodiseaseinModInc}  = 0\\] \\[H_{A}:  \\mu_{cardiodiseaseinVeryLowInc} - \\mu_{cardiodiseaseinModInc} \\neq 0\\]\n\\[SE = \\sqrt{\\frac{s_1^2}{n_1} + \\frac{s^2_2}{n_2}}\\]\n\n# computing a point estimate for both groups\nmu_cardio_low &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Very Low Income') %&gt;% \n  summarize(mean(cardiovascular_disease))\n\nmu_cardio_mod &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Above Moderate Income') %&gt;% \n  summarize(mean(cardiovascular_disease))\n\n\npoint_est_cardio &lt;- as.numeric(mu_cardio_low - mu_cardio_mod) # will use for z-score \n\nprint(point_est_cardio)\n\n[1] 5.975809\n\n\nThe point estimate value of 5.98 indicates that there is a difference between the two samples.\n\n# computing standard error\n\nn1 &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Very Low Income') %&gt;% \n  count()\n\nn2 &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Above Moderate Income') %&gt;% \n  count()\n\ns1 &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Very Low Income') %&gt;% \n  summarize(sd(cardiovascular_disease, na.rm = TRUE))\n\ns2&lt;- income_water_la %&gt;% \n  filter(ami_category == 'Above Moderate Income') %&gt;% \n  summarize(sd(cardiovascular_disease, na.rm = TRUE))\n\n\n# computing standard error\n\nstandard_error &lt;-as.numeric(sqrt(s1^2/n1 + s2^2/n2))\n\n\n# computing z-score\nz &lt;- (point_est_cardio - 0)/standard_error\n\nThe z-score of 24.22 indicates that the observed difference in cardiovascular disease related ED visits between Above Moderate Income census tracts and Very Low Income census tract groups is 24.2 standard deviations above the null of zero difference.\nNow that I have a calculated z-score, I am then able to calculate the p-value. I decided to input lower.tail = TRUE because I am finding the probability that the lower tail of my confidence interval is no bigger than my z score of 24.22.\n* In other words, I am using lower.tail = TRUE because we are trying to calculate the probability to the left of 0 .\n\np_value &lt;- pnorm(z,lower.tail = FALSE)\nprint(p_value)\n\n[1] 6.561525e-130\n\n\nAlternatively, this hypothesis test can be executed using a t.test()\n\nt.test(income_water_la$cardiovascular_disease[income_water_la$ami_category == 'Very Low Income'], income_water_la$cardiovascular_disease[income_water_la$ami_category == 'Above Moderate Income'])\n\n\n    Welch Two Sample t-test\n\ndata:  income_water_la$cardiovascular_disease[income_water_la$ami_category == \"Very Low Income\"] and income_water_la$cardiovascular_disease[income_water_la$ami_category == \"Above Moderate Income\"]\nt = 24.222, df = 1050, p-value &lt; 2.2e-16\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n 5.491703 6.459914\nsample estimates:\nmean of x mean of y \n 16.80984  10.83403 \n\n\nBased on the output by the Welch Two Sample t-test, I am 95% confident that (5.49, 6.46) captures the true value of the average difference of cardiovascular disease related ED visits between the two income groups.\nThe p-value derived from the Welch Two Sample t-test is significantly higher than the p-value derived from the pnorm calculation, and this could be explained by the fact that the Welch Two Sample t-test assumes it is a t-distribution.\n\n\nI’d like to construct a confidence interval apart from the derived interval in order to calculate a 5% probability that I am able to observe the point estimate. Calculating this confidence interval means that I will likely be 5% wrong that the difference between ED visits for heart attacks is between this range.\n\n# 95% confidence interval \n\ncritical_val &lt;- qnorm(0.025, lower.tail = FALSE)\n\nlower_ci &lt;- round(point_est_cardio - critical_val*standard_error, 2)\nupper_ci &lt;- round(point_est_cardio + critical_val*standard_error,2)\n\nprint(paste0(\"There is a 95% probability that [\",lower_ci, \",\", upper_ci, \"] contains the difference in cardiovascular related ED visits across above moderate income and extremely low income census tract groups. \"))\n\n[1] \"There is a 95% probability that [5.49,6.46] contains the difference in cardiovascular related ED visits across above moderate income and extremely low income census tract groups. \"\n\n\n\n\n\n\nUnderstanding the impact that socioeconomic status can have on a census tracts’ overall health is important in order to address the larger issue at hand : environmental racism. Through hypothesis testing and linear regression, I was able to conclude that cardiovascular health does depend on a variety of factors that are outside the scope of the data sets used, but I was able to point out the disparities between two vastly different income groups.\nBased on the stargazer results, adding more variables to the third linear model did increase the R2 value, but not enough to conclude that there is a strong correlation as its value was less than 0.5. The p-value of 6.561525e-130 indicates that it is very unlikely to see the point estimate if the null hypothesis were true. In other words, there is a 5% chance that observing the point estimate of 5.98 would occur even if the null hypothesis were true.\nThis is consistent with the research provided by the EPA stating that the occurrence of cardiovascular disease does rely on a number of factors. I decided to use income as the explanatory variable because ,generally speaking, households in LA County that are of low income tend to live closer to freeways or polluting facilities.\nBoth methods of conducting the hypothesis test of the difference in two means calculated a p-value of less than 0.05. Thus, we can reject the null that there is no difference in heart attack related ED visits across above moderate income and very low income census tract groups. In conclusion, I found a statistically significant effect in which average income lowers the heart attack related ED rate per 10,000 people.\nIn the future, consistent units for certain variables like drinking_water would be helpful in running a deeper analysis. As the unit for this variable is the sum of percentiles of selected contaminants, it can be challenging to associate unit increases when percentiles come into play.\n\n\n\nAlthough income level isn’t the only explanatory variable for cardiovascular health, this study highlighted the other potential socioeconomic factors that can be affected by income. Further research on this topic needs to be conducted, and possibly done in other states to confirm whether or not the effect is consistent in other parts of the world. Moreover, this analysis does prove there to be a correlation and statistically significant significance between income and cardiovascular health.\n\n\n\nAir Pollution and Cardiovascular Disease Basics | US EPA, www.epa.gov/air-research/air-pollution-and-cardiovascular-disease-basics.\nLi, Min, and Faxi Yuan. “Historical Redlining and Resident Exposure to Covid-19: A Study of New York City.” Race and Social Problems, U.S. National Library of Medicine, 2022, www.ncbi.nlm.nih.gov/pmc/articles/PMC8212581/#CR3.\n“Socioeconomic Factors.” Centers for Disease Control and Prevention, 1 Sept. 2023, www.cdc.gov/dhdsp/health_equity/socioeconomic.htm#:~:text=Socioeconomic%20status%20is%20a%20multidimensional,employment%20status%2C%20and%20other%20factors.&text=Low%20socioeconomic%20status%20is%20associated,from%20cardiovascular%20disease%20(CVD).\n\n\n\n# qqplot\nggplot(data = income_water_la)+\n  geom_qq(aes(sample = income_water_la$cardiovascular_disease), color = '#352C9E')+\n  geom_qq_line(aes(sample = income_water_la$cardiovascular_disease))+\n  theme(line = element_blank())+\n  labs(x = 'Normal Distribution Quantiles',\n       y = 'Sample Quantiles',\n       title = 'Heart Attack-Related ED Visits (per 10,000)')+\n  theme_classic()\n\nWarning: Use of `income_water_la$cardiovascular_disease` is discouraged.\nℹ Use `cardiovascular_disease` instead.\nUse of `income_water_la$cardiovascular_disease` is discouraged.\nℹ Use `cardiovascular_disease` instead.\n\n\n\n\n\nThis qqplot of the cardiovascular disease variable tells me that there is a slight divergence from the normal distribution line in the lower quantiles, indicating that values in this quantile range are higher relative to a normal distribution. Moreover, this qqplot also tells me that it follows a normal distribution in the higher quantiles.\n\nggplot(data = income_water_la, aes(x = med_hh_income))+\n  geom_histogram(bins = 100, fill = '#AAACE4')+\n  labs(x = 'Median Household Income (USD)',\n       y = 'Number of Census Tract Groups',\n       title = 'Distribution of Median Income of LA County Census Tract Groups')+\n  theme_minimal()"
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html#motivation",
    "href": "blog/income-and-cardiovascular-health/index.html#motivation",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "According to the CDC, cardiovascular-related diseases are the leading cause of death in America. Although there are a number of factors that influence cardiovascular diseases, I chose to study the relationship between median income of census tracts in Los Angeles County and the number of cardiovascular disease-related Emergency Department (ED) visits. In this research project, I will conduct a difference in means hypothesis test of two groups : Extremely Low Income and Above Moderate Income to see if there is a true difference in heart attack-related Emergency Department (ED) visits.\nCardiovascular disease can be caused by a variety of factors. Some traditional risk factors include “male sex, older age, increased blood pressure, high cholesterol, low HDL (high density lipoprotein) and smoking”(epa.gov 2023). However, there are additional external factors that can exacerbate the likelihood of cardiovascular disease occurring. The EPA also states that people who live in areas with high air pollution are at an increased risk of PM2.5, along with people of low socioeconomic status.\nLos Angeles is historically known to have strategically cut off and outline communities with freeways, which has led to brown and black communities predominantly having respiratory issues and other chronic health issues. According to the National Institute of Health, “COVID-19 has been reported to disproportionately impact racial/ethnic minorities in the USA, both in terms of infections and deaths” (Li, Yuan 2021). This can be explained by the historic segregation of minority groups. Neighborhoods that are currently undergoing socioeconomic disadvantages were known to be redlined historically. The New York case study concluded that the disproportionate number of deaths among minority groups in America during the COVID-19 pandemic highlighted the historic health and race divide compared to the White majority.\nI chose this to research this topic because it is important to realize and note that environmental problems do not only include sea level rise or increased global temperature. Ongoing environmental problems combined with systemic racism can be detrimental to the survival of minority groups in America.\nFurthermore, I decided to incorporate other variables in this research topic in order to explore other socioeconomic and chemical variables that could be correlated with the number of heart attack related emergency department visits. Education is an important socioeconomic variable to research as it can influence employment and income levels. According to the CDC , ” individuals with lower levels of educational attainment are more likely to lack sociopolitical power and economic resources”(cdc.gov). Although not all socioeconomic factors are covered in this research project, education will play an important role in determining income level and housing status."
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html#data",
    "href": "blog/income-and-cardiovascular-health/index.html#data",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "CalEnviroScreen has recently celebrated their tenth anniversary since releasing their first version. The CalEnviroScreen data set used in this study aims to highlight which communities within California are the most impacted by pollution by using census tract data that includes socioeconomic and demographic information which can help further encapsulate the larger issue at hand : pollution burden. Both California EPA and OEHHA (Office of Environmental Health Hazard Assessment) have collaboratively formulated this Environmental Justice screening tool as a means to help visualize impacts of pollution burden while accumulating various demographic data accessible for readers.\n\nVariables Explored:\n\nPM2.5 - Annual mean PM 2.5 concentrations (micrograms per meter cubed)\neducation - Percent of population over 25 with less than a high school education\ncardiovascular_disease - Age-adjusted rate of emergency department visits for heart attacks per 10,000.\n\n\nThe second dataset used for this research project contains statistical information of median household income in LA County, which is then categorized into ami categories : Above Moderate Income, Moderate Income, Low Income, Very Low Income, and Extremely Low Income.\nMy game plan for analysis includes :\n\nTidying both data sets\nJoining data sets by census tract\nPerforming a linear regression\nConducting a hypothesis test for a difference in means of emergency department visits for heart attacks between very low income AMI census tracts vs above moderate income AMI census tracts."
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html#methods",
    "href": "blog/income-and-cardiovascular-health/index.html#methods",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "# reading in the data \n\nincome_la &lt;- read_csv('./data/Median_Income_and_AMI_(census_tract).csv') %&gt;% \n  rename('census_tract' = 'tract')\n\n# reading in water la data\n\nlos_angeles &lt;- read_csv('data/cal_enviro_4.csv') %&gt;% \n  clean_names() %&gt;% \n  filter(california_county == 'Los Angeles')\n\n\n# joining in the two datasets\n\nincome_water_la &lt;- left_join(los_angeles, income_la, by = \"census_tract\") %&gt;% \n  na.omit()\n\n\n# preliminary plotting\nincome_cardio_tox_ed &lt;- lm(cardiovascular_disease ~ med_hh_income + tox_release +education, data = income_water_la)\n\nincome_cardio &lt;- lm(cardiovascular_disease ~ med_hh_income, data = income_water_la)\n\nsummary(income_cardio)\n\n\nCall:\nlm(formula = cardiovascular_disease ~ med_hh_income, data = income_water_la)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-10.9293  -2.9622  -0.3157   2.8695  12.0974 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    1.919e+01  2.305e-01   83.26   &lt;2e-16 ***\nmed_hh_income -6.557e-05  2.778e-06  -23.60   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 4.202 on 1903 degrees of freedom\nMultiple R-squared:  0.2264,    Adjusted R-squared:  0.226 \nF-statistic:   557 on 1 and 1903 DF,  p-value: &lt; 2.2e-16\n\n\n\ncount_income &lt;- income_water_la %&gt;% \n  group_by(ami_category) %&gt;% \n  count() %&gt;%  \n  rename(`Number of Census Groups` = n,\n         `AMI Category` = ami_category)\nknitr::kable(count_income)\n\n\n\n\nAMI Category\nNumber of Census Groups\n\n\n\n\nAbove Moderate Income\n419\n\n\nExtremely Low Income\n94\n\n\nLow Income\n740\n\n\nModerate Income\n19\n\n\nVery Low Income\n633\n\n\n\n\n\nOf the 1,905 census tract groups with an associated AMI category :\n\n419 census tract groups fall under the Above Moderate Income category\n633 census tract groups fall under the Very Low Income category.\n\n\nggplot(income_water_la, aes(x = med_hh_income, y = cardiovascular_disease, col = education))+\n  geom_point()+\n  stat_smooth(method = 'lm', col = 'red')+\n  labs(x = 'Median Household Income (USD)',\n       y = 'Heart Attack ED visits per 10,000 people',\n       title = '     Median Income vs. Cardiovascular Disease')+\n  theme_classic()+\n  stat_poly_eq()\n\n\n\n\n\nggplot(income_water_la, aes(x = education, y = cardiovascular_disease))+\n  geom_point(color = '#CBC3E3')+\n  stat_smooth(method = 'lm', col = '#9F2B68')+\n  labs(x = '% of Adults &gt; 25 with Less \\nThan a High School Education',\n       y = 'Heart Attack ED visits per 10,000 people',\n       title = '     Education Level vs. Cardiovascular Disease')+\n  theme_classic()+\n  stat_poly_eq()\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n## hypothesis test construction\n# summary statistics for cardiovascular disease related ed visits\n\ncardio_stats &lt;- income_water_la %&gt;% \n  group_by(ami_category) %&gt;% \n  summarise(mean = mean(cardiovascular_disease),\n            sd = sd(cardiovascular_disease))\n\n\nprint(cardio_stats)\n\n# A tibble: 5 × 3\n  ami_category           mean    sd\n  &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt;\n1 Above Moderate Income  10.8  3.20\n2 Extremely Low Income   15.6  5.49\n3 Low Income             13.9  4.05\n4 Moderate Income        11.8  3.56\n5 Very Low Income        16.8  4.81\n\n\nThe Extremely Low Income AMI group has the most variance amongst AMI groups in this dataset.\nHowever, the number of census tract groups in the Extremely Low Income AMI group is significantly lower than the number of census groups in the Above Moderate Income. In an effort to make this analysis as representative as possible, I will be using the data from census tract groups in the Very Low Income AMI category.\nUsing the stargazer package, I will conduct three different linear models to determine which added variables positively affect the adjusted R2 value.\n\n# table of r squared values with different variables added \n\nm3 &lt;- lm(cardiovascular_disease ~ med_hh_income + pm2_5 + education, data = income_water_la)\nm2 &lt;- lm(cardiovascular_disease ~  pm2_5, data = income_water_la)\nm1 &lt;- lm(cardiovascular_disease ~ med_hh_income, data = income_water_la)\n\n\nstargazer(m1, m2, m3, title = 'Regression Results',type=\"text\", dep.var.labels = c('Heart Attack Related ED Visits per 10,000'),\n          covariate.labels=c(\"Median Household Income\",\"PM 2.5 Concentration\",\"% Population &gt; 25 with less than a High School Education\"),\n          omit.stat = c('f'),\n          font.size = 'small',align = TRUE)\n\n\nRegression Results\n==============================================================================================================\n                                                                          Dependent variable:                 \n                                                         -----------------------------------------------------\n                                                               Heart Attack Related ED Visits per 10,000      \n                                                                (1)               (2)               (3)       \n--------------------------------------------------------------------------------------------------------------\nMedian Household Income                                     -0.0001***                          -0.00003***   \n                                                             (0.00000)                           (0.00000)    \n                                                                                                              \nPM 2.5 Concentration                                                            0.254*           -0.465***    \n                                                                                (0.131)           (0.111)     \n                                                                                                              \n% Population &gt; 25 with less than a High School Education                                         0.119***     \n                                                                                                  (0.007)     \n                                                                                                              \nConstant                                                     19.189***         11.263***         19.129***    \n                                                              (0.230)           (1.538)           (1.351)     \n                                                                                                              \n--------------------------------------------------------------------------------------------------------------\nObservations                                                   1,905             1,905             1,905      \nR2                                                             0.226             0.002             0.319      \nAdjusted R2                                                    0.226             0.001             0.318      \nResidual Std. Error                                      4.202 (df = 1903) 4.772 (df = 1903) 3.945 (df = 1901)\n==============================================================================================================\nNote:                                                                              *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01\n\n\nInterpretation of stargazer table:\nOutput for first equation m1:\n\nFor every 1 unit increase in Median Household Income, the rate of cardiovascular disease related ED visits is expected to decrease by -0.0001 per 10,000.\n\nTo put this in perspective, a 10,000 increase in Median Household Income is expected to decrease the rate of ED visits for heart attacks by 1 per 10,000.\n\nR2 : 0.226 of all variability in the cardiovascular_disease output can be explained by Median Household Income.\n\nOutput for second equation m2 :\n\nA one unit increase in annual particulate matter concentration pm2_5 is expected to increase ED visits for heart attacks by .254 per 10,000.\nR2 : .002 of all variability in the cardiovascular_disease output can be explained by pm2_5.\n\nOutput for third equation m3 :\n\nHolding pm2_5 and Median Household Income constant, a one percent increase in population older than 25 with less than a high school education will lead to a 0.119 per 10,000 increase in ED visits for heart attacks.\nThe adjusted R2 value is 0.319, meaning that , combined, Median Household Income, Particulate Matter Concentration, and Education explain 31.9% of variability in the rate of emergency department visits for heart attacks per 10,000.\n\n\n\\[H_{0}: \\mu_{cardiodiseaseinVeryrLowInc} - \\mu_{cardiodiseaseinModInc}  = 0\\] \\[H_{A}:  \\mu_{cardiodiseaseinVeryLowInc} - \\mu_{cardiodiseaseinModInc} \\neq 0\\]\n\\[SE = \\sqrt{\\frac{s_1^2}{n_1} + \\frac{s^2_2}{n_2}}\\]\n\n# computing a point estimate for both groups\nmu_cardio_low &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Very Low Income') %&gt;% \n  summarize(mean(cardiovascular_disease))\n\nmu_cardio_mod &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Above Moderate Income') %&gt;% \n  summarize(mean(cardiovascular_disease))\n\n\npoint_est_cardio &lt;- as.numeric(mu_cardio_low - mu_cardio_mod) # will use for z-score \n\nprint(point_est_cardio)\n\n[1] 5.975809\n\n\nThe point estimate value of 5.98 indicates that there is a difference between the two samples.\n\n# computing standard error\n\nn1 &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Very Low Income') %&gt;% \n  count()\n\nn2 &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Above Moderate Income') %&gt;% \n  count()\n\ns1 &lt;- income_water_la %&gt;% \n  filter(ami_category == 'Very Low Income') %&gt;% \n  summarize(sd(cardiovascular_disease, na.rm = TRUE))\n\ns2&lt;- income_water_la %&gt;% \n  filter(ami_category == 'Above Moderate Income') %&gt;% \n  summarize(sd(cardiovascular_disease, na.rm = TRUE))\n\n\n# computing standard error\n\nstandard_error &lt;-as.numeric(sqrt(s1^2/n1 + s2^2/n2))\n\n\n# computing z-score\nz &lt;- (point_est_cardio - 0)/standard_error\n\nThe z-score of 24.22 indicates that the observed difference in cardiovascular disease related ED visits between Above Moderate Income census tracts and Very Low Income census tract groups is 24.2 standard deviations above the null of zero difference.\nNow that I have a calculated z-score, I am then able to calculate the p-value. I decided to input lower.tail = TRUE because I am finding the probability that the lower tail of my confidence interval is no bigger than my z score of 24.22.\n* In other words, I am using lower.tail = TRUE because we are trying to calculate the probability to the left of 0 .\n\np_value &lt;- pnorm(z,lower.tail = FALSE)\nprint(p_value)\n\n[1] 6.561525e-130\n\n\nAlternatively, this hypothesis test can be executed using a t.test()\n\nt.test(income_water_la$cardiovascular_disease[income_water_la$ami_category == 'Very Low Income'], income_water_la$cardiovascular_disease[income_water_la$ami_category == 'Above Moderate Income'])\n\n\n    Welch Two Sample t-test\n\ndata:  income_water_la$cardiovascular_disease[income_water_la$ami_category == \"Very Low Income\"] and income_water_la$cardiovascular_disease[income_water_la$ami_category == \"Above Moderate Income\"]\nt = 24.222, df = 1050, p-value &lt; 2.2e-16\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n 5.491703 6.459914\nsample estimates:\nmean of x mean of y \n 16.80984  10.83403 \n\n\nBased on the output by the Welch Two Sample t-test, I am 95% confident that (5.49, 6.46) captures the true value of the average difference of cardiovascular disease related ED visits between the two income groups.\nThe p-value derived from the Welch Two Sample t-test is significantly higher than the p-value derived from the pnorm calculation, and this could be explained by the fact that the Welch Two Sample t-test assumes it is a t-distribution.\n\n\nI’d like to construct a confidence interval apart from the derived interval in order to calculate a 5% probability that I am able to observe the point estimate. Calculating this confidence interval means that I will likely be 5% wrong that the difference between ED visits for heart attacks is between this range.\n\n# 95% confidence interval \n\ncritical_val &lt;- qnorm(0.025, lower.tail = FALSE)\n\nlower_ci &lt;- round(point_est_cardio - critical_val*standard_error, 2)\nupper_ci &lt;- round(point_est_cardio + critical_val*standard_error,2)\n\nprint(paste0(\"There is a 95% probability that [\",lower_ci, \",\", upper_ci, \"] contains the difference in cardiovascular related ED visits across above moderate income and extremely low income census tract groups. \"))\n\n[1] \"There is a 95% probability that [5.49,6.46] contains the difference in cardiovascular related ED visits across above moderate income and extremely low income census tract groups. \""
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html#results-and-discussion",
    "href": "blog/income-and-cardiovascular-health/index.html#results-and-discussion",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "Understanding the impact that socioeconomic status can have on a census tracts’ overall health is important in order to address the larger issue at hand : environmental racism. Through hypothesis testing and linear regression, I was able to conclude that cardiovascular health does depend on a variety of factors that are outside the scope of the data sets used, but I was able to point out the disparities between two vastly different income groups.\nBased on the stargazer results, adding more variables to the third linear model did increase the R2 value, but not enough to conclude that there is a strong correlation as its value was less than 0.5. The p-value of 6.561525e-130 indicates that it is very unlikely to see the point estimate if the null hypothesis were true. In other words, there is a 5% chance that observing the point estimate of 5.98 would occur even if the null hypothesis were true.\nThis is consistent with the research provided by the EPA stating that the occurrence of cardiovascular disease does rely on a number of factors. I decided to use income as the explanatory variable because ,generally speaking, households in LA County that are of low income tend to live closer to freeways or polluting facilities.\nBoth methods of conducting the hypothesis test of the difference in two means calculated a p-value of less than 0.05. Thus, we can reject the null that there is no difference in heart attack related ED visits across above moderate income and very low income census tract groups. In conclusion, I found a statistically significant effect in which average income lowers the heart attack related ED rate per 10,000 people.\nIn the future, consistent units for certain variables like drinking_water would be helpful in running a deeper analysis. As the unit for this variable is the sum of percentiles of selected contaminants, it can be challenging to associate unit increases when percentiles come into play."
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html#conclusion",
    "href": "blog/income-and-cardiovascular-health/index.html#conclusion",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "Although income level isn’t the only explanatory variable for cardiovascular health, this study highlighted the other potential socioeconomic factors that can be affected by income. Further research on this topic needs to be conducted, and possibly done in other states to confirm whether or not the effect is consistent in other parts of the world. Moreover, this analysis does prove there to be a correlation and statistically significant significance between income and cardiovascular health."
  },
  {
    "objectID": "blog/income-and-cardiovascular-health/index.html#references",
    "href": "blog/income-and-cardiovascular-health/index.html#references",
    "title": "Income and Cardiovascular Health in LA County",
    "section": "",
    "text": "Air Pollution and Cardiovascular Disease Basics | US EPA, www.epa.gov/air-research/air-pollution-and-cardiovascular-disease-basics.\nLi, Min, and Faxi Yuan. “Historical Redlining and Resident Exposure to Covid-19: A Study of New York City.” Race and Social Problems, U.S. National Library of Medicine, 2022, www.ncbi.nlm.nih.gov/pmc/articles/PMC8212581/#CR3.\n“Socioeconomic Factors.” Centers for Disease Control and Prevention, 1 Sept. 2023, www.cdc.gov/dhdsp/health_equity/socioeconomic.htm#:~:text=Socioeconomic%20status%20is%20a%20multidimensional,employment%20status%2C%20and%20other%20factors.&text=Low%20socioeconomic%20status%20is%20associated,from%20cardiovascular%20disease%20(CVD).\n\n\n\n# qqplot\nggplot(data = income_water_la)+\n  geom_qq(aes(sample = income_water_la$cardiovascular_disease), color = '#352C9E')+\n  geom_qq_line(aes(sample = income_water_la$cardiovascular_disease))+\n  theme(line = element_blank())+\n  labs(x = 'Normal Distribution Quantiles',\n       y = 'Sample Quantiles',\n       title = 'Heart Attack-Related ED Visits (per 10,000)')+\n  theme_classic()\n\nWarning: Use of `income_water_la$cardiovascular_disease` is discouraged.\nℹ Use `cardiovascular_disease` instead.\nUse of `income_water_la$cardiovascular_disease` is discouraged.\nℹ Use `cardiovascular_disease` instead.\n\n\n\n\n\nThis qqplot of the cardiovascular disease variable tells me that there is a slight divergence from the normal distribution line in the lower quantiles, indicating that values in this quantile range are higher relative to a normal distribution. Moreover, this qqplot also tells me that it follows a normal distribution in the higher quantiles.\n\nggplot(data = income_water_la, aes(x = med_hh_income))+\n  geom_histogram(bins = 100, fill = '#AAACE4')+\n  labs(x = 'Median Household Income (USD)',\n       y = 'Number of Census Tract Groups',\n       title = 'Distribution of Median Income of LA County Census Tract Groups')+\n  theme_minimal()"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "this text is a h1 header but does not have the class .title\n\n\nthis ia also a level-one header (h1)\n\nthis is a title"
  },
  {
    "objectID": "blog/python-redner/STAC-search.html",
    "href": "blog/python-redner/STAC-search.html",
    "title": "MPC Catalog Exploration",
    "section": "",
    "text": "Code\nimport numpy as np \nimport geopandas as gpd\nimport rioxarray as rioxr\nimport matplotlib.pyplot as plt\n\nfrom shapely.geometry import Polygon\n\n# used to access STAC catalogs \nfrom pystac_client import Client\n# used to sign items from the NPC STAC catalog \nimport planetary_computer\n\n# other libraries for nice outputs \nfrom IPython.display import Image"
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#access",
    "href": "blog/python-redner/STAC-search.html#access",
    "title": "MPC Catalog Exploration",
    "section": "Access",
    "text": "Access\nWe use the Client function from the pystac_client package to access the catalog:\n\n\nCode\n# access catalog\n\ncatalog = Client.open(\"https://planetarycomputer.microsoft.com/api/stac/v1\",\n                      modifier = planetary_computer.sign_inplace)\n\n\nThe modifier parameter is needed to access the data in the MPC catalog."
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#exploration",
    "href": "blog/python-redner/STAC-search.html#exploration",
    "title": "MPC Catalog Exploration",
    "section": "Exploration",
    "text": "Exploration\nLet’s check out some of the catalog’s metadata:\n\n\nCode\n# metadata from the catalog \nprint('Title: ' , catalog.title)\nprint('Description: ', catalog.description)\n\n\nTitle:  Microsoft Planetary Computer STAC API\nDescription:  Searchable spatiotemporal metadata describing Earth science datasets hosted by the Microsoft Planetary Computer\n\n\nWe can access the catalog’s collections by using the get_collections() method:\n\n\nCode\ncatalog.get_collections()\n\n\n&lt;generator object Client.get_collections at 0x000001298A903780&gt;\n\n\nNotice the output of get_collections() is a generator.\nThis is a special kind of lazy object in Python over which you can loop over like a list.\nUnlike a list, the items in a generator do not exist in memory until you explicitly iterate over them or convert them into a list. Let’s try getting the collections from the catalog again:\n\n\nCode\n# get collections and print their names\ncollections = list(catalog.get_collections())\n\nprint('Number of collections: ', len(collections))\nprint('Collections IDS: ')\n\nfor collection in collections:\n    print('-', collection.id)\n\n\nNumber of collections:  122\nCollections IDS: \n- daymet-annual-pr\n- daymet-daily-hi\n- 3dep-seamless\n- 3dep-lidar-dsm\n- fia\n- sentinel-1-rtc\n- gridmet\n- daymet-annual-na\n- daymet-monthly-na\n- daymet-annual-hi\n- daymet-monthly-hi\n- daymet-monthly-pr\n- gnatsgo-tables\n- hgb\n- cop-dem-glo-30\n- cop-dem-glo-90\n- goes-cmi\n- terraclimate\n- nasa-nex-gddp-cmip6\n- gpm-imerg-hhr\n- gnatsgo-rasters\n- 3dep-lidar-hag\n- 3dep-lidar-intensity\n- 3dep-lidar-pointsourceid\n- mtbs\n- noaa-c-cap\n- 3dep-lidar-copc\n- modis-64A1-061\n- alos-fnf-mosaic\n- 3dep-lidar-returns\n- mobi\n- landsat-c2-l2\n- era5-pds\n- chloris-biomass\n- kaza-hydroforecast\n- planet-nicfi-analytic\n- modis-17A2H-061\n- modis-11A2-061\n- daymet-daily-pr\n- 3dep-lidar-dtm-native\n- 3dep-lidar-classification\n- 3dep-lidar-dtm\n- gap\n- modis-17A2HGF-061\n- planet-nicfi-visual\n- gbif\n- modis-17A3HGF-061\n- modis-09A1-061\n- alos-dem\n- alos-palsar-mosaic\n- deltares-water-availability\n- modis-16A3GF-061\n- modis-21A2-061\n- us-census\n- jrc-gsw\n- deltares-floods\n- modis-43A4-061\n- modis-09Q1-061\n- modis-14A1-061\n- hrea\n- modis-13Q1-061\n- modis-14A2-061\n- sentinel-2-l2a\n- modis-15A2H-061\n- modis-11A1-061\n- modis-15A3H-061\n- modis-13A1-061\n- daymet-daily-na\n- nrcan-landcover\n- modis-10A2-061\n- ecmwf-forecast\n- noaa-mrms-qpe-24h-pass2\n- sentinel-1-grd\n- nasadem\n- io-lulc\n- landsat-c2-l1\n- drcog-lulc\n- chesapeake-lc-7\n- chesapeake-lc-13\n- chesapeake-lu\n- noaa-mrms-qpe-1h-pass1\n- noaa-mrms-qpe-1h-pass2\n- noaa-nclimgrid-monthly\n- goes-glm\n- usda-cdl\n- eclipse\n- esa-cci-lc\n- esa-cci-lc-netcdf\n- fws-nwi\n- usgs-lcmap-conus-v13\n- usgs-lcmap-hawaii-v10\n- noaa-climate-normals-tabular\n- noaa-climate-normals-netcdf\n- noaa-climate-normals-gridded\n- aster-l1t\n- cil-gdpcir-cc-by-sa\n- io-lulc-9-class\n- io-biodiversity\n- naip\n- noaa-cdr-sea-surface-temperature-whoi\n- noaa-cdr-ocean-heat-content\n- cil-gdpcir-cc0\n- cil-gdpcir-cc-by\n- noaa-cdr-sea-surface-temperature-whoi-netcdf\n- noaa-cdr-sea-surface-temperature-optimum-interpolation\n- modis-10A1-061\n- sentinel-5p-l2-netcdf\n- sentinel-3-olci-wfr-l2-netcdf\n- noaa-cdr-ocean-heat-content-netcdf\n- sentinel-3-synergy-aod-l2-netcdf\n- sentinel-3-synergy-v10-l2-netcdf\n- sentinel-3-olci-lfr-l2-netcdf\n- sentinel-3-sral-lan-l2-netcdf\n- sentinel-3-slstr-lst-l2-netcdf\n- sentinel-3-slstr-wst-l2-netcdf\n- sentinel-3-sral-wat-l2-netcdf\n- ms-buildings\n- sentinel-3-slstr-frp-l2-netcdf\n- sentinel-3-synergy-syn-l2-netcdf\n- sentinel-3-synergy-vgp-l2-netcdf\n- sentinel-3-synergy-vg1-l2-netcdf\n- esa-worldcover"
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#collection",
    "href": "blog/python-redner/STAC-search.html#collection",
    "title": "MPC Catalog Exploration",
    "section": "Collection",
    "text": "Collection\nWe can select a single collection for exploration using the get_child() method for the catalog and the collection id as the parameter:\n\n\nCode\nnaip_collection = catalog.get_child('naip')\nnaip_collection\n\n\n\n\n\n\n\n    \n        \n            \n                \n                    \n        \n            type\n            \"Collection\"\n        \n    \n                \n            \n                \n                    \n        \n            id\n            \"naip\"\n        \n    \n                \n            \n                \n                    \n        \n            stac_version\n            \"1.0.0\"\n        \n    \n                \n            \n                \n                    \n        \n            description\n            \"The [National Agriculture Imagery Program](https://www.fsa.usda.gov/programs-and-services/aerial-photography/imagery-programs/naip-imagery/) (NAIP) provides U.S.-wide, high-resolution aerial imagery, with four spectral bands (R, G, B, IR).  NAIP is administered by the [Aerial Field Photography Office](https://www.fsa.usda.gov/programs-and-services/aerial-photography/) (AFPO) within the [US Department of Agriculture](https://www.usda.gov/) (USDA).  Data are captured at least once every three years for each state.  This dataset represents NAIP data from 2010-present, in [cloud-optimized GeoTIFF](https://www.cogeo.org/) format.\n\"\n        \n    \n                \n            \n                \n                    \n        \n            links\n            [] 6 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            rel\n            \"items\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip/items\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/geo+json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            rel\n            \"root\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Microsoft Planetary Computer STAC API\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            rel\n            \"license\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://www.fsa.usda.gov/help/policies-and-links/\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Public Domain\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            rel\n            \"describedby\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/dataset/naip\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Human readable dataset overview and reference\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            \n        \n            \n                \n        \n            rel\n            \"self\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            5\n            \n        \n            \n                \n        \n            rel\n            \"parent\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Microsoft Planetary Computer STAC API\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            stac_extensions\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"https://stac-extensions.github.io/table/v1.2.0/schema.json\"\n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            item_assets\n            \n        \n            \n                \n        \n            image\n            \n        \n            \n                \n        \n            type\n            \"image/tiff; application=geotiff; profile=cloud-optimized\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"data\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            title\n            \"RGBIR COG tile\"\n        \n    \n            \n        \n            \n                \n        \n            eo:bands\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            name\n            \"Red\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"red\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            name\n            \"Green\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"green\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            name\n            \"Blue\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"blue\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            name\n            \"NIR\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"nir\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"near-infrared\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            metadata\n            \n        \n            \n                \n        \n            type\n            \"text/plain\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"metadata\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            title\n            \"FGDC Metdata\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            thumbnail\n            \n        \n            \n                \n        \n            type\n            \"image/jpeg\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"thumbnail\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Thumbnail\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            msft:region\n            \"westeurope\"\n        \n    \n                \n            \n                \n                    \n        \n            msft:container\n            \"naip\"\n        \n    \n                \n            \n                \n                    \n        \n            msft:storage_account\n            \"naipeuwest\"\n        \n    \n                \n            \n                \n                    \n        \n            msft:short_description\n            \"NAIP provides US-wide, high-resolution aerial imagery.  This dataset includes NAIP images from 2010 to the present.\"\n        \n    \n                \n            \n                \n                    \n        \n            title\n            \"NAIP: National Agriculture Imagery Program\"\n        \n    \n                \n            \n                \n                    \n        \n            extent\n            \n        \n            \n                \n        \n            spatial\n            \n        \n            \n                \n        \n            bbox\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -124.784\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            24.744\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            -66.951\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            49.346\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            temporal\n            \n        \n            \n                \n        \n            interval\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"2010-01-01T00:00:00Z\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"2021-12-31T00:00:00Z\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            license\n            \"proprietary\"\n        \n    \n                \n            \n                \n                    \n        \n            keywords\n            [] 7 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"NAIP\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"Aerial\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \"Imagery\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \"USDA\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            \"AFPO\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            5\n            \"Agriculture\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            6\n            \"United States\"\n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            providers\n            [] 3 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            name\n            \"USDA Farm Service Agency\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"producer\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"licensor\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            url\n            \"https://www.fsa.usda.gov/programs-and-services/aerial-photography/imagery-programs/naip-imagery/\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            name\n            \"Esri\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"processor\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            url\n            \"https://www.esri.com/\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            name\n            \"Microsoft\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"host\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"processor\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            url\n            \"https://planetarycomputer.microsoft.com\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            summaries\n            \n        \n            \n                \n        \n            gsd\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            0.6\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            1.0\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            eo:bands\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            name\n            \"Red\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"red\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"visible red\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            name\n            \"Green\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"green\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"visible green\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            name\n            \"Blue\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"blue\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"visible blue\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            name\n            \"NIR\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"nir\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"near-infrared\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            assets\n            \n        \n            \n                \n        \n            thumbnail\n            \n        \n            \n                \n        \n            href\n            \"https://ai4edatasetspublicassets.blob.core.windows.net/assets/pc_thumbnails/naip.png\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/png\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"NAIP thumbnail\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"thumbnail\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            geoparquet-items\n            \n        \n            \n                \n        \n            href\n            \"abfs://items/naip.parquet\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/x-parquet\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"GeoParquet STAC items\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"Snapshot of the collection's STAC items exported to GeoParquet format.\"\n        \n    \n            \n        \n            \n                \n        \n            msft:partition_info\n            \n        \n            \n                \n        \n            is_partitioned\n            True\n        \n    \n            \n        \n            \n                \n        \n            partition_frequency\n            \"AS\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            table:storage_options\n            \n        \n            \n                \n        \n            account_name\n            \"pcstacitems\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"stac-items\""
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#catalog-search",
    "href": "blog/python-redner/STAC-search.html#catalog-search",
    "title": "MPC Catalog Exploration",
    "section": "Catalog search",
    "text": "Catalog search\nWe can narrow the search within the catalog by specifying a time range, an area of interest, and the collection name.\nThe simplest way to defind the area of interest to look for in the catalog are:\n\na GeoJSON-type dictionary with coordinates of the bounding box\nas a list [xmin,xmax,ymin,ymax] with the coordinate values defined the four corners of the bounding box.\n\nYou could also use a point, or some more complex polygon.\nIn this lesson, we will look for NAIP scenes over Santa Barbara from 2018 to 2020.\n\n\nCode\n# Temporal range of interest\ntime_range = \"2018-01-01/2023-01-01\"\n\n# NCEAS bounding box (as a GeoJSON)\nbbox = {\n    \"type\": \"Polygon\",\n    \"coordinates\":[\n        [\n            [-119.70608227128903, 34.426300194372274],\n            [-119.70608227128903, 34.42041139020533],\n            [-119.6967885126002, 34.42041139020533],\n            [-119.6967885126002, 34.426300194372274],\n            [-119.70608227128903, 34.426300194372274]\n        ]\n    ],\n}\n\n# catalog search\nsearch = catalog.search(\n    collections=['naip'], # list with collection id\n    intersects=bbox,\n    datetime=time_range)\nsearch\n\n\n&lt;pystac_client.item_search.ItemSearch at 0x1298bf4be90&gt;\n\n\nTo get the items found in the search (or check if there were any matches in the search) we use the item_collection() method:\n\n\nCode\nitems = search.item_collection()\n\n# number of items in search\nlen(items)\n\n\n2\n\n\n\n\nCode\nitems\n\n\n\n\n\n\n    \n        \n            \n                \n                    \n        \n            type\n            \"FeatureCollection\"\n        \n    \n                \n            \n                \n                    \n        \n            features\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            type\n            \"Feature\"\n        \n    \n            \n        \n            \n                \n        \n            stac_version\n            \"1.0.0\"\n        \n    \n            \n        \n            \n                \n        \n            id\n            \"ca_m_3411935_sw_11_060_20200521\"\n        \n    \n            \n        \n            \n                \n        \n            properties\n            \n        \n            \n                \n        \n            gsd\n            0.6\n        \n    \n            \n        \n            \n                \n        \n            datetime\n            \"2020-05-21T00:00:00Z\"\n        \n    \n            \n        \n            \n                \n        \n            naip:year\n            \"2020\"\n        \n    \n            \n        \n            \n                \n        \n            proj:bbox\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            246930.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            3806808.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            253260.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            3814296.0\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            proj:epsg\n            26911\n        \n    \n            \n        \n            \n                \n        \n            naip:state\n            \"ca\"\n        \n    \n            \n        \n            \n                \n        \n            proj:shape\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            12480\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            10550\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            proj:transform\n            [] 9 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            0.6\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            246930.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            -0.6\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            5\n            3814296.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            6\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            7\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            8\n            1.0\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            geometry\n            \n        \n            \n                \n        \n            type\n            \"Polygon\"\n        \n    \n            \n        \n            \n                \n        \n            coordinates\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            [] 5 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.683292\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.373269\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.685448\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.440724\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.754272\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.439192\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.752061\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.371741\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.683292\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.373269\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            links\n            [] 5 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            rel\n            \"collection\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            rel\n            \"parent\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            rel\n            \"root\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Microsoft Planetary Computer STAC API\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            rel\n            \"self\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip/items/ca_m_3411935_sw_11_060_20200521\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/geo+json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            \n        \n            \n                \n        \n            rel\n            \"preview\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/data/v1/item/map?collection=naip&item=ca_m_3411935_sw_11_060_20200521\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Map of item\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            assets\n            \n        \n            \n                \n        \n            image\n            \n        \n            \n                \n        \n            href\n            \"https://naipeuwest.blob.core.windows.net/naip/v002/ca/2020/ca_060cm_2020/34119/m_3411935_sw_11_060_20200521.tif?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/tiff; application=geotiff; profile=cloud-optimized\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"RGBIR COG tile\"\n        \n    \n            \n        \n            \n                \n        \n            eo:bands\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            name\n            \"Red\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"red\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            name\n            \"Green\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"green\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            name\n            \"Blue\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"blue\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            name\n            \"NIR\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"nir\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"near-infrared\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"data\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            thumbnail\n            \n        \n            \n                \n        \n            href\n            \"https://naipeuwest.blob.core.windows.net/naip/v002/ca/2020/ca_060cm_2020/34119/m_3411935_sw_11_060_20200521.200.jpg?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/jpeg\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Thumbnail\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"thumbnail\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            tilejson\n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/data/v1/item/tilejson.json?collection=naip&item=ca_m_3411935_sw_11_060_20200521&assets=image&asset_bidx=image%7C1%2C2%2C3&format=png\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"TileJSON with default rendering\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"tiles\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            rendered_preview\n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/data/v1/item/preview.png?collection=naip&item=ca_m_3411935_sw_11_060_20200521&assets=image&asset_bidx=image%7C1%2C2%2C3&format=png\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/png\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Rendered preview\"\n        \n    \n            \n        \n            \n                \n        \n            rel\n            \"preview\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"overview\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            bbox\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.754272\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.371741\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            -119.683292\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            34.440724\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            stac_extensions\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"https://stac-extensions.github.io/eo/v1.0.0/schema.json\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"https://stac-extensions.github.io/projection/v1.0.0/schema.json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            collection\n            \"naip\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            type\n            \"Feature\"\n        \n    \n            \n        \n            \n                \n        \n            stac_version\n            \"1.0.0\"\n        \n    \n            \n        \n            \n                \n        \n            id\n            \"ca_m_3411935_sw_11_060_20180724_20190209\"\n        \n    \n            \n        \n            \n                \n        \n            properties\n            \n        \n            \n                \n        \n            gsd\n            0.6\n        \n    \n            \n        \n            \n                \n        \n            datetime\n            \"2018-07-24T00:00:00Z\"\n        \n    \n            \n        \n            \n                \n        \n            naip:year\n            \"2018\"\n        \n    \n            \n        \n            \n                \n        \n            proj:bbox\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            246978.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            3806856.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            253212.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            3814248.0\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            proj:epsg\n            26911\n        \n    \n            \n        \n            \n                \n        \n            naip:state\n            \"ca\"\n        \n    \n            \n        \n            \n                \n        \n            proj:shape\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            12320\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            10390\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            proj:transform\n            [] 9 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            0.6\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            246978.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            -0.6\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            5\n            3814248.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            6\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            7\n            0.0\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            8\n            1.0\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            geometry\n            \n        \n            \n                \n        \n            type\n            \"Polygon\"\n        \n    \n            \n        \n            \n                \n        \n            coordinates\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            [] 5 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.683827\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.37369\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.685956\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.44028\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.753736\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.438772\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.751554\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.372185\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.683827\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.37369\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            links\n            [] 5 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            rel\n            \"collection\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            rel\n            \"parent\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            rel\n            \"root\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Microsoft Planetary Computer STAC API\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            rel\n            \"self\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/naip/items/ca_m_3411935_sw_11_060_20180724_20190209\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/geo+json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            \n        \n            \n                \n        \n            rel\n            \"preview\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/data/v1/item/map?collection=naip&item=ca_m_3411935_sw_11_060_20180724_20190209\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Map of item\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            assets\n            \n        \n            \n                \n        \n            image\n            \n        \n            \n                \n        \n            href\n            \"https://naipeuwest.blob.core.windows.net/naip/v002/ca/2018/ca_060cm_2018/34119/m_3411935_sw_11_060_20180724_20190209.tif?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/tiff; application=geotiff; profile=cloud-optimized\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"RGBIR COG tile\"\n        \n    \n            \n        \n            \n                \n        \n            eo:bands\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            name\n            \"Red\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"red\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            name\n            \"Green\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"green\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            name\n            \"Blue\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"blue\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            name\n            \"NIR\"\n        \n    \n            \n        \n            \n                \n        \n            common_name\n            \"nir\"\n        \n    \n            \n        \n            \n                \n        \n            description\n            \"near-infrared\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"data\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            metadata\n            \n        \n            \n                \n        \n            href\n            \"https://naipeuwest.blob.core.windows.net/naip/v002/ca/2018/ca_fgdc_2018/34119/m_3411935_sw_11_060_20180724.txt?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/plain\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"FGDC Metdata\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"metadata\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            thumbnail\n            \n        \n            \n                \n        \n            href\n            \"https://naipeuwest.blob.core.windows.net/naip/v002/ca/2018/ca_060cm_2018/34119/m_3411935_sw_11_060_20180724_20190209.200.jpg?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/jpeg\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Thumbnail\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"thumbnail\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            tilejson\n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/data/v1/item/tilejson.json?collection=naip&item=ca_m_3411935_sw_11_060_20180724_20190209&assets=image&asset_bidx=image%7C1%2C2%2C3&format=png\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"TileJSON with default rendering\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"tiles\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            rendered_preview\n            \n        \n            \n                \n        \n            href\n            \"https://planetarycomputer.microsoft.com/api/data/v1/item/preview.png?collection=naip&item=ca_m_3411935_sw_11_060_20180724_20190209&assets=image&asset_bidx=image%7C1%2C2%2C3&format=png\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"image/png\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Rendered preview\"\n        \n    \n            \n        \n            \n                \n        \n            rel\n            \"preview\"\n        \n    \n            \n        \n            \n                \n        \n            roles\n            [] 1 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"overview\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            bbox\n            [] 4 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            -119.753736\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            34.372185\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            -119.683827\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            34.44028\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            stac_extensions\n            [] 2 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"https://stac-extensions.github.io/eo/v1.0.0/schema.json\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"https://stac-extensions.github.io/projection/v1.0.0/schema.json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n            \n                \n        \n            collection\n            \"naip\""
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#item",
    "href": "blog/python-redner/STAC-search.html#item",
    "title": "MPC Catalog Exploration",
    "section": "Item",
    "text": "Item\nLet’s get the first item in the search\n\n\nCode\n# get the first item in the catalog search\nitem = items[0]\n\ntype(item)\n\n\npystac.item.Item\n\n\nRemember the STAC item is the core object in the catalog. The item does not contain the data itself, but rather metadata about it and links to access the actual data (assets). Some of the metadata:\n\n\nCode\nprint('id',item.id)\nitem.properties\n\n\nid ca_m_3411935_sw_11_060_20200521\n\n\n{'gsd': 0.6,\n 'datetime': '2020-05-21T00:00:00Z',\n 'naip:year': '2020',\n 'proj:bbox': [246930.0, 3806808.0, 253260.0, 3814296.0],\n 'proj:epsg': 26911,\n 'naip:state': 'ca',\n 'proj:shape': [12480, 10550],\n 'proj:transform': [0.6, 0.0, 246930.0, 0.0, -0.6, 3814296.0, 0.0, 0.0, 1.0]}\n\n\nJust as the item properties, the item assets are given in a directory, with each value being a pystac.asset. Let’s check the assets in the item:\n\n\nCode\nitem.assets\n\n\n{'image': &lt;Asset href=https://naipeuwest.blob.core.windows.net/naip/v002/ca/2020/ca_060cm_2020/34119/m_3411935_sw_11_060_20200521.tif?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D&gt;,\n 'thumbnail': &lt;Asset href=https://naipeuwest.blob.core.windows.net/naip/v002/ca/2020/ca_060cm_2020/34119/m_3411935_sw_11_060_20200521.200.jpg?st=2023-11-28T21%3A44%3A18Z&se=2023-11-29T22%3A29%3A18Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-29T21%3A33%3A12Z&ske=2023-12-06T21%3A33%3A12Z&sks=b&skv=2021-06-08&sig=GSn1c9CqePox1x0T2Q2hDcIOqiLG3DOM%2BGQpht6ld58%3D&gt;,\n 'tilejson': &lt;Asset href=https://planetarycomputer.microsoft.com/api/data/v1/item/tilejson.json?collection=naip&item=ca_m_3411935_sw_11_060_20200521&assets=image&asset_bidx=image%7C1%2C2%2C3&format=png&gt;,\n 'rendered_preview': &lt;Asset href=https://planetarycomputer.microsoft.com/api/data/v1/item/preview.png?collection=naip&item=ca_m_3411935_sw_11_060_20200521&assets=image&asset_bidx=image%7C1%2C2%2C3&format=png&gt;}\n\n\n\n\nCode\nfor key in item.assets.keys():\n    print(key, '--', item.assets[key].title)\n\n\nimage -- RGBIR COG tile\nthumbnail -- Thumbnail\ntilejson -- TileJSON with default rendering\nrendered_preview -- Rendered preview\n\n\nNotice each asset has an href, which is a link to the asset object (i.e. the data). For example, we can use the UR: for the rendered preview asset to plot it:\n\n\nCode\nImage(url = item.assets['rendered_preview'].href, width = 500)"
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#load-data",
    "href": "blog/python-redner/STAC-search.html#load-data",
    "title": "MPC Catalog Exploration",
    "section": "Load data",
    "text": "Load data\nThe raster data in our current item is in the image asset. Again, we access this data via its URL. This time we open it using rioxr.open_rasterio() directly:\n\n\nCode\nsb = rioxr.open_rasterio(item.assets['image'].href)\nsb\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray (band: 4, y: 12480, x: 10550)&gt;\n[526656000 values with dtype=uint8]\nCoordinates:\n  * band         (band) int32 1 2 3 4\n  * x            (x) float64 2.469e+05 2.469e+05 ... 2.533e+05 2.533e+05\n  * y            (y) float64 3.814e+06 3.814e+06 ... 3.807e+06 3.807e+06\n    spatial_ref  int32 0\nAttributes:\n    AREA_OR_POINT:             Area\n    TIFFTAG_IMAGEDESCRIPTION:  OrthoVista\n    TIFFTAG_RESOLUTIONUNIT:    1 (unitless)\n    TIFFTAG_SOFTWARE:          Trimble Germany GmbH\n    TIFFTAG_XRESOLUTION:       1\n    TIFFTAG_YRESOLUTION:       1\n    _FillValue:                0\n    scale_factor:              1.0\n    add_offset:                0.0xarray.DataArrayband: 4y: 12480x: 10550...[526656000 values with dtype=uint8]Coordinates: (4)band(band)int321 2 3 4array([1, 2, 3, 4])x(x)float642.469e+05 2.469e+05 ... 2.533e+05array([246930.3, 246930.9, 246931.5, ..., 253258.5, 253259.1, 253259.7])y(y)float643.814e+06 3.814e+06 ... 3.807e+06array([3814295.7, 3814295.1, 3814294.5, ..., 3806809.5, 3806808.9, 3806808.3])spatial_ref()int320crs_wkt :PROJCS[\"NAD83 / UTM zone 11N\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4269\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"26911\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314140356inverse_flattening :298.257222101reference_ellipsoid_name :GRS 1980longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :NAD83horizontal_datum_name :North American Datum 1983projected_crs_name :NAD83 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"NAD83 / UTM zone 11N\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4269\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"26911\"]]GeoTransform :246930.0 0.6 0.0 3814296.0 0.0 -0.6array(0)Indexes: (3)bandPandasIndexPandasIndex(Index([1, 2, 3, 4], dtype='int32', name='band'))xPandasIndexPandasIndex(Index([          246930.3,           246930.9,           246931.5,\n       246932.09999999998, 246932.69999999998,           246933.3,\n                 246933.9,           246934.5, 246935.09999999998,\n       246935.69999999998,\n       ...\n                 253254.3,           253254.9,           253255.5,\n       253256.09999999998, 253256.69999999998,           253257.3,\n                 253257.9,           253258.5, 253259.09999999998,\n       253259.69999999998],\n      dtype='float64', name='x', length=10550))yPandasIndexPandasIndex(Index([         3814295.7,          3814295.1,          3814294.5,\n       3814293.9000000004, 3814293.3000000003,          3814292.7,\n                3814292.1,          3814291.5, 3814290.9000000004,\n       3814290.3000000003,\n       ...\n                3806813.7,          3806813.1,          3806812.5,\n       3806811.9000000004, 3806811.3000000003,          3806810.7,\n                3806810.1,          3806809.5, 3806808.9000000004,\n       3806808.3000000003],\n      dtype='float64', name='y', length=12480))Attributes: (9)AREA_OR_POINT :AreaTIFFTAG_IMAGEDESCRIPTION :OrthoVistaTIFFTAG_RESOLUTIONUNIT :1 (unitless)TIFFTAG_SOFTWARE :Trimble Germany GmbHTIFFTAG_XRESOLUTION :1TIFFTAG_YRESOLUTION :1_FillValue :0scale_factor :1.0add_offset :0.0\n\n\n\n\nCode\n# plot raster with correct ratio \nsize = 6 # height in of plot\naspect = sb.rio.width/sb.rio.height\nsb.sel(band = [1,2,3]).plot.imshow(size = size, aspect = aspect)\n\n\nRasterioIOError: Read or write failed. IReadBlock failed at X offset 10, Y offset 10: TIFFReadEncodedTile() failed."
  },
  {
    "objectID": "blog/python-redner/STAC-search.html#exercise",
    "href": "blog/python-redner/STAC-search.html#exercise",
    "title": "MPC Catalog Exploration",
    "section": "Exercise",
    "text": "Exercise\nThe ‘cop-dem-glo-90’ collection contains the Copernicus DEM at 90m resolution (the one we used for Grand Canyon).\n\nUse the bbox for Santa Barbara to look for items in this colleciton.\nGet the first item in the search and check its assets.\nPlot the item’s rendered preview asset.\nOpen the item’s data using rioxarray.\n\n\n\nCode\ncop_dem_glo = catalog.get_child('cop-dem-glo-90')\n\n\n\n\nCode\n# NCEAS bounding box (as a GeoJSON)\nbbox = {\n    \"type\": \"Polygon\",\n    \"coordinates\":[\n        [\n            [-119.70608227128903, 34.426300194372274],\n            [-119.70608227128903, 34.42041139020533],\n            [-119.6967885126002, 34.42041139020533],\n            [-119.6967885126002, 34.426300194372274],\n            [-119.70608227128903, 34.426300194372274]\n        ]\n    ],\n}\n\n# catalog search\nsearch = catalog.search(\n    collections=['cop_dem_glo'], # list with collection id\n    intersects=bbox,\n    datetime=time_range)\n\n\n\n\nCode\nsearch2\n\n\n&lt;pystac_client.item_search.ItemSearch at 0x7828124c5950&gt;\n\n\n\n\nCode\nsearch = catalog.search(\n    collections = ['cop-dem-glo-90'],\n    intersects = bbox)\nsearch\n\n\n&lt;pystac_client.item_search.ItemSearch at 0x78280a343750&gt;\n\n\n\n\nCode\nsb_items = search.item_collection()\n\n# number of items in search\nlen(sb_items)\n\n\n1\n\n\n\n\nCode\n# first item in catalog\nsb_item = sb_items[0]\ntype(sb_item)\n\n\npystac.item.Item\n\n\n\n\nCode\nsb_item.assets\n\n\n{'data': &lt;Asset href=https://elevationeuwest.blob.core.windows.net/copernicus-dem/COP90_hh/Copernicus_DSM_COG_30_N34_00_W120_00_DEM.tif?st=2023-11-26T21%3A48%3A56Z&se=2023-12-04T21%3A48%3A56Z&sp=rl&sv=2021-06-08&sr=c&skoid=c85c15d6-d1ae-42d4-af60-e2ca0f81359b&sktid=72f988bf-86f1-41af-91ab-2d7cd011db47&skt=2023-11-27T21%3A48%3A55Z&ske=2023-12-04T21%3A48%3A55Z&sks=b&skv=2021-06-08&sig=PTUGvLdLIar6RTPQfNEUPXORfNW4KGQ266oIhkaug/s%3D&gt;,\n 'tilejson': &lt;Asset href=https://planetarycomputer.microsoft.com/api/data/v1/item/tilejson.json?collection=cop-dem-glo-90&item=Copernicus_DSM_COG_30_N34_00_W120_00_DEM&assets=data&colormap_name=terrain&rescale=-1000%2C4000&format=png&gt;,\n 'rendered_preview': &lt;Asset href=https://planetarycomputer.microsoft.com/api/data/v1/item/preview.png?collection=cop-dem-glo-90&item=Copernicus_DSM_COG_30_N34_00_W120_00_DEM&assets=data&colormap_name=terrain&rescale=-1000%2C4000&format=png&gt;}\n\n\n\n\nCode\nImage(url = sb_item.assets['rendered_preview'].href, width = 500)\n\n\n\n\n\n\n\nCode\ndem = rioxr.open_rasterio(sb_item.assets['data'].href)\ndem\n                                         \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray (band: 1, y: 1200, x: 1200)&gt;\n[1440000 values with dtype=float32]\nCoordinates:\n  * band         (band) int64 1\n  * x            (x) float64 -120.0 -120.0 -120.0 ... -119.0 -119.0 -119.0\n  * y            (y) float64 35.0 35.0 35.0 35.0 35.0 ... 34.0 34.0 34.0 34.0\n    spatial_ref  int64 0\nAttributes:\n    AREA_OR_POINT:  Point\n    scale_factor:   1.0\n    add_offset:     0.0xarray.DataArrayband: 1y: 1200x: 1200...[1440000 values with dtype=float32]Coordinates: (4)band(band)int641array([1])x(x)float64-120.0 -120.0 ... -119.0 -119.0array([-120.      , -119.999167, -119.998333, ..., -119.0025  , -119.001667,\n       -119.000833])y(y)float6435.0 35.0 35.0 ... 34.0 34.0 34.0array([35.      , 34.999167, 34.998333, ..., 34.0025  , 34.001667, 34.000833])spatial_ref()int640crs_wkt :GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984grid_mapping_name :latitude_longitudespatial_ref :GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]GeoTransform :-120.00041666666667 0.0008333333333333334 0.0 35.000416666666666 0.0 -0.0008333333333333334array(0)Indexes: (3)bandPandasIndexPandasIndex(Index([1], dtype='int64', name='band'))xPandasIndexPandasIndex(Index([             -120.0, -119.99916666666667, -119.99833333333333,\n                 -119.9975, -119.99666666666667, -119.99583333333334,\n                  -119.995, -119.99416666666667, -119.99333333333334,\n                 -119.9925,\n       ...\n       -119.00833333333334,           -119.0075, -119.00666666666666,\n       -119.00583333333333,            -119.005, -119.00416666666666,\n       -119.00333333333333,           -119.0025, -119.00166666666667,\n       -119.00083333333333],\n      dtype='float64', name='x', length=1200))yPandasIndexPandasIndex(Index([              35.0,  34.99916666666667, 34.998333333333335,\n                  34.9975,  34.99666666666667,  34.99583333333333,\n                   34.995, 34.994166666666665,  34.99333333333333,\n                  34.9925,\n       ...\n        34.00833333333333,            34.0075,  34.00666666666667,\n       34.005833333333335,             34.005,  34.00416666666667,\n        34.00333333333333,            34.0025, 34.001666666666665,\n        34.00083333333333],\n      dtype='float64', name='y', length=1200))Attributes: (3)AREA_OR_POINT :Pointscale_factor :1.0add_offset :0.0"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mariam Garcia",
    "section": "",
    "text": "Hi! My name is Mariam, and I am a current MEDS student at the Bren School at UCSB. In my free time, I enjoy going on nature walks, cooking, and discovering a new show. I am an environmental justice advocate, and I aim to apply skills and knowledge gained at the Bren School to make an impactful difference on disadvantaged communities.\n\nEducation\nMaster of Environmental Data Science | Bren School at UCSB | 2024\nBachelor’s in Environmental Science and Policy | UC Irvine | 2022\n\n\nExperience"
  },
  {
    "objectID": "blog/aqi-analysis-santa-barbara/aqi-analysis-santa-barbara.html",
    "href": "blog/aqi-analysis-santa-barbara/aqi-analysis-santa-barbara.html",
    "title": "Exploring the Impacts of the Thomas Fire on Air Quality and Land in CA",
    "section": "",
    "text": "Author : Mariam Garcia\nGithub Link : https://github.com/mariamkg00/eds-220-hwk-4-task-3"
  },
  {
    "objectID": "blog/aqi-analysis-santa-barbara/aqi-analysis-santa-barbara.html#importing-needed-libraries-and-functions",
    "href": "blog/aqi-analysis-santa-barbara/aqi-analysis-santa-barbara.html#importing-needed-libraries-and-functions",
    "title": "Exploring the Impacts of the Thomas Fire on Air Quality and Land in CA",
    "section": "Importing needed libraries and functions",
    "text": "Importing needed libraries and functions\n\n# importing libraries\nimport os\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport xarray as xr\nimport rioxarray as rioxr\nimport matplotlib.patches as mpatches\n\nimport geopandas as gpd\nfrom shapely.geometry import Polygon\n\n\nAQI Data Access\nIn order to access daily AQI data, please see this link :https://aqs.epa.gov/aqsweb/airdata/download_files.html#AQI\nWhen prompted, hover over daily_aqi_by_county_2017.zip and daily_aqi_by_county_2018.zip to copy the URLs for the zip files.\nWe will use pandas’s read_csv() function to load in the data files.\n\n#reading in the 2017 data from the URL\nurl = 'https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2017.zip'\naqi_17 = pd.read_csv(url)\n\n#reading in the 2018 data from the URL \nurl2 = 'https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2018.zip'\naqi_18 = pd.read_csv(url2)\n\n\n\nImporting other datasets\nWe will use the geopandas.read_file() function to read in the TIGER shapefile data for US states.\n\n# Importing US Shapefile\nstates = gpd.read_file('data/tl_us_2022_state/tl_2018_us_state.shp')\n# update column names to small caps\nstates.columns = states.columns.str.lower()\n\nWe will use os in order to avoid hard coding, which can help make inputting file paths more reproducible.\nIn order to make sure the landsat data for Santa Barbara is loaded in correctly, we will use rioxr.open_rasterio() function as a way to open this .nc file.\n\n# -- importing data\nlandsat_sb_fp = os.path.join(os.getcwd(),'data','landsat8-2018-01-26-sb-simplified.nc')\n\nlandsat_sb = rioxr.open_rasterio(landsat_sb_fp)\n\n# importing CA shapefile\nca = gpd.read_file(os.path.join('data','California_Fire_Perimeters_2017','California_Fire_Perimeters_2017.shp'))\n\n\n\nPreparing,Previewing, and Updating AQI Data\nIn order to access 2017 and 2018 AQI data for Santa Barbara, we will use the pandas .concat() function to join the two datasets together.\nIn order to only access Santa Barbara data, using the .loc function will help us filter.\n\n# using pd.concat() to merge the two dataframes together\naqi = pd.concat([aqi_17, aqi_18])\n\n# re-assign the column names - .str.lower() makes them lower case\naqi.columns = aqi.columns.str.lower()\n\n#  re-assign the column names again - .str.replace(' ','_') replaces the space for _\naqi.columns = aqi.columns.str.replace(' ','_')\n\n# filtering for data only from santa barbara\naqi_sb = aqi.loc[aqi['county_name'] == 'Santa Barbara']\n\n\n#removing state_name, county_name, state_code, and county_code columns from aqi_sb using drop\naqi_sb = aqi_sb.drop(columns = ['state_name','county_name','state_code','county_code'])\n\n\nNotice that the Date column is stored as an object, instead of a DateTime object.\n\n# updating date column using to_datetime() function\naqi_sb.date = pd.to_datetime(aqi_sb.date)\n\n# updating the index of aqi_sb using set_index\naqi_sb = aqi_sb.set_index('date')\n\nCalculating an average over a rolling window:\nrolling() is a method for pandas.series that provides rolling window calculations.\nA rolling average is critical to have as it continues to update the dataset’s mean up until the nth term. This entails that each rolling average observation only includes values up until the nth term of a dataset. Rolling averages are important to use when analyzing data over time in order to visualize fluctuations that may occur within a dataset.\nWithout making any new variables, we will add the mean of the AQI over a 5-day rolling window as a new column named ‘five_day_average’ to the aqi_sb dataframe:\n\naqi_sb['five_day_average'] = aqi_sb.aqi.rolling('5D').mean()\n\n\n# adding daily averages to aqi_sb\n# as of now we only have five day average, we need daily average.\naqi_sb['daily_average']= aqi_sb.aqi.resample('D').mean()\n\n\n# tidying the ca dataset\n\nca.columns = ca.columns.str.lower()\n\n\n\nPreparing, Previewing, and Updating Landsat Data and CA Fire Data\n\n# ------exploring landsat file-------\n\n# exploring the netcdf file\ntype(landsat_sb) \n\nprint(type(landsat_sb.values))\nlandsat_sb.values\n\n\n# ------- exploring CA wildfire data ------\n\nprint('crs:' ,ca.crs)\nprint('shape of ca data:' ,ca.shape)\n\n&lt;class 'method'&gt;\ncrs: epsg:3857\nshape of ca data: (608, 23)\n\n\n\nUpdates\nIt is important to use the squeeze() and drop() functions in order to get rid of any unncessary and unneeded bands, because it makes the landsat_sb datset three-dimensional when it is not needed.\n\n# dropping band and using squeeze\nlandsat_sb = landsat_sb.squeeze()\n\n# dropping band dimension\nlandsat_sb = landsat_sb.drop('band')\n\n\nPreliminary mapping\nSelecting the red, green and blue variables of the landsat_sb xarray.Dataset, convert it to a numpy.array using the to_array() method, and then use .plot.imshow() to create an RGB image with the data.\nAdjusting the scale for the bands in order to get a true color image. In order to do so, input (robust= True)\nMaking a false color image without making any new variables by plotting the swir-22, near-infrared, and red variables.\n\n# making the false color image \nlandsat_sb[['swir22','nir08','red']].to_array().plot.imshow(robust = True)\n\n&lt;matplotlib.image.AxesImage at 0x7fa1a8ae5970&gt;\n\n\n\n\n\n\n\n\nMaking necessary updates\nIn order to have a functional plot, we must make sure that the crs’s for both ca and landsat_sb match.\n\n# checking crs for fire data\nca.crs == landsat_sb.rio.crs\n\nFalse\n\n\nFor legibility and clarity, it is optimal to have column names be lower cased, and this is done with the .str.lower() function.\n\n# make column names small caps\nca.columns = ca.columns.str.lower()\n\nWe only want data pertaining to the Thomas Fire, so we will filter accordingly.\nWe will then use the dissolve() function in order to aggregate geometries based on the values in the fire_name column.\n\n# selecting fire_name row for Thomas, subsetting CA wildfire data \nthomas_ca =ca[ca['fire_name'] == 'THOMAS'] \n\n# dissolving geometries \nthomas_ca = thomas_ca[['fire_name','geometry']].dissolve(by='fire_name', as_index=False)\n\nIt is imperative that the CRS’s match for both thomas_ca and ca datasets. In order to transform the crs of thomas_ca, we will use the to_crs() function to change it to the ca’s CRS.\n\n# the CRS's don't match, will change accordingly. \n\nthomas_ca = thomas_ca.to_crs('epsg:32611')"
  },
  {
    "objectID": "blog/aqi-analysis-santa-barbara/aqi-analysis-santa-barbara.html#data-visualization",
    "href": "blog/aqi-analysis-santa-barbara/aqi-analysis-santa-barbara.html#data-visualization",
    "title": "Exploring the Impacts of the Thomas Fire on Air Quality and Land in CA",
    "section": "Data Visualization",
    "text": "Data Visualization\n\nFirst, we will plot the AQI daily average and five day averages against each other.\nObjectives with plotting AQI:\n\nconstructing a line graph that contains both the 5-day averages and the daily average AQI in Santa Barbara on top of each other\nadding a legend indicating which line corresponds to which average\nusing the date_time index column as the x-axis\nupdating scale and axis labels\nincorporating a title\n\n\n# plotting the daily and five day average Air Quality Index in Santa Barbara\nfig, ax = plt.subplots(figsize=(10,4))\n\naqi_sb.daily_average.plot(ylabel = 'Air Quality Index (PM in ppm)',\n                   xlabel = 'Date',\n                   title = 'Daily Air Quality in Santa Barbara in 2017 to 2018',\n                   legend = True,\n                   color = '#D594D9')\naqi_sb.five_day_average.plot(ylabel = 'Air Quality Index (PM in ppm)',\n                   xlabel = 'Month',\n                   title = 'Average Air Quality in Santa Barbara in 2017 to 2018',\n                   legend = True,\n                   color = '#3D2A3E')\n\nplt.savefig('images/aqi_sb_graph.png')\n\n\n\n\n\n\nNow, we will make a map visualizing the Fire Perimeter of the Thomas Fire.\nObjectives:\n\nensuring that the false image coloring plot of the Thomas Fire is overlaying the landsat image\nadding a legend indicating the perimeter to which the fire scar remains\ndissolving axis\nadding a title\n\nOne way to add a customized legend to a plot is by using the mpatches.Patch. Using this, we are able to input any custom color and label.\nIn this instance, I will input the thomas_ca_patch as blue.\n\n# making the map with both Thomas Fire perimeter and false color imagery\nfig, ax = plt.subplots()\nax.axis('off')\n\n#-----------landsat subplot customization--------------\nlandsat_sb[['swir22','nir08','red']].to_array().plot.imshow(ax=ax, robust = True)\n\n\n\n#-----------Thomas Fire subplot customization---------------\nthomas_ca.plot(ax=ax, edgecolor = 'blue', alpha = 0.5)\nthomas_ca_patch = mpatches.Patch(color = 'blue',label = 'Thomas Fire Scar 2017')\n\n#--------adding the needed customizations\nax.legend(handles = [thomas_ca_patch], frameon = True)\nax.set_title('Thomas Fire Scar and Perimeter in CA 2017')\n\n#------ saving figure\n# save figure\n\nplt.savefig('images/thomas_fire_scar_2017.png')\n\n\n\n\n\n\nGeographical Context\nFor geographical context, below is a plot generated to show the area impacted by the fire, followed by the entirety of the US.\nFor clarity and optimal visualization, only keep the state of California from the states dataset so that the Thomas Fire is visible.\nIn the following cells:\n\nsubset the states dataset to only include California\nensure the CRS’s for both states and thomas_ca datasets match\npreliminary plot of California\n\n\n# keeping only California\ncalifornia = states[(states.name == 'California')]\n\n\n# reprojecting crs of california subset to match thomas_ca crs\n\ncalifornia = california.to_crs('epsg:32611')\n\n\n# plotting geographical context of the Thomas Fire relative to the size of the United States\n\nfig, ax = plt.subplots()\n\nax.axis('off')\n\ncalifornia.plot(ax = ax, color = 'lightblue')\nthomas_ca.plot(ax=ax, edgecolor = 'blue', alpha = 0.5)\n#thomas_ca_patch = mpatches.Patch(color = 'blue',label = 'Thomas Fire Scar 2017')\n\nax.set_title('Thomas Fire Scar Relative to the Entire State of California')\n\nText(0.5, 1.0, 'Thomas Fire Scar Relative to the Entire State of California')"
  }
]